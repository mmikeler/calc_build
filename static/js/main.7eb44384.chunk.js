(this.webpackJsonpcalc2=this.webpackJsonpcalc2||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(10),i=n.n(c),r=(n(16),n(6)),o=n(5),l=n(2),h=n(3),d=(n(7),n(9)),p=n(0);function j(e,t){var n,a=t.SHEET_WIDTH*t.SHEET_LENGHT*t.SHEET_FILLING_AREA,s=0,c=e.size>0?1:0,i=0,r=Object(d.a)(e.values());try{for(r.s();!(n=r.n()).done;){var o=n.value,l=o.nominalwidth,h=o.nominalheight;i+=o.count,s+=l*h*o.count}}catch(p){r.e(p)}finally{r.f()}return{lists:c+=Math.floor(s/a),details:i}}function b(e){var t=e.set.details,n=e.options,a=[],s={"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b":n.SHEET_NAME,"\u0420\u0430\u0437\u043c\u0435\u0440":"".concat(n.SHEET_WIDTH,"\u043c\u043c x ").concat(n.SHEET_LENGHT,"\u043c\u043c x ").concat(n.SHEET_DEPTH,"\u043c\u043c"),"\u041b\u0438\u0441\u0442\u043e\u0432 \u0432 \u0440\u0430\u0441\u043a\u0440\u043e\u0435":j(t,n).lists,"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043b\u0438\u0441\u0442":"".concat(n.SHEET_PRICE," \u0440\u0443\u0431."),"\u0412\u0441\u0435\u0433\u043e \u0434\u0435\u0442\u0430\u043b\u0435\u0439":j(t,n).details},c=(n.SERVER_URL?n.SERVER_URL:"/")+n.SHEET_PICTURE_URL;for(var i in s)a.push(Object(p.jsx)(u,{title:i,value:s[i]},i));return Object(p.jsxs)("div",{id:"summary",style:{backgroundImage:"url("+c+")"},children:[a,Object(p.jsxs)("div",{className:"summ-item",children:[Object(p.jsx)("span",{children:Object(p.jsx)("b",{children:"\u041f\u0440\u0438\u043c\u0435\u0440\u043d\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c:"})}),Object(p.jsx)("span",{children:Object(p.jsx)("b",{children:m(e.set,n,!0)})})]}),Object(p.jsx)(x,{set:e.set,o:n})]})}var x=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={open:!1},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=m(this.props.set,this.props.o);return 0===this.props.set.details.size?null:this.state.open?Object(p.jsxs)("div",{className:"summ-item more",children:[Object(p.jsx)("span",{onClick:function(){return e.setState({open:!1})},className:"action-link red w100p",children:Object(p.jsx)("b",{children:"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"})}),t]}):Object(p.jsx)("div",{className:"summ-item",children:Object(p.jsx)("span",{onClick:function(){return e.setState({open:!0})},className:"action-link red",children:Object(p.jsx)("b",{children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u0440\u0430\u0441\u0447\u0451\u0442\u0435"})})})}}]),n}(s.a.Component);function u(e){return Object(p.jsxs)("div",{className:"summ-item",children:[Object(p.jsxs)("span",{children:[e.title,": "]}),Object(p.jsx)("span",{children:e.value})]})}function m(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=t.SHEET_WIDTH*t.SHEET_LENGHT*t.SHEET_FILLING_AREA,i=0,r=e.details.size>0?1:0,o={sm:0,lg:0},l=0,h=0,b=0,x=!!e.billingOptions&&e.billingOptions,u=Object(d.a)(e.details.values());try{for(u.s();!(n=u.n()).done;){var m=n.value,O=m.nominalwidth,f=m.nominalheight,v=m.count;for(var y in i+=O*f*v,m.edge){var N=m.edge[y];N>0&&N<1?o.sm+="left"===y||"right"===y?f:O:N>0&&N>1&&(o.lg+="left"===y||"right"===y?f:O)}(m.lt.x>0||m.rt.x>0||m.rb.x>0||m.lb.x>0)&&l++,m.loops&&"none"!==m.loops.side&&(b+=m.loops.count),m.groove&&h++}}catch(A){u.e(A)}finally{u.f()}r+=Math.floor(i/c);var S=o.sm*t.EDGE_MULTIPLICATOR/1e3*Math.abs(t.PRICE_EDGE_04),C=o.lg*t.EDGE_MULTIPLICATOR/1e3*Math.abs(t.PRICE_EDGE_02),E=Math.round(S+C+(o.sm+o.lg)*t.EDGE_MULTIPLICATOR/1e3*Math.abs(t.PRICE_EDGING)),w=r*t.SHEET_PRICE,k=r*t.PRICE_SHEET_CUTTING,I=l*Math.abs(t.PRICE_CURVATURE),T=b*Math.abs(t.PRICE_LOOP),_=h*Math.abs(t.PRICE_GROOVE),F=x&&x.inbox&&r>0?+t.PRICE_TAPE:0,D=x&&x.poddon&&r>0?+t.PRICE_PALLET:0,M=w+k+E+I+T+_+F+D,R=[];if(x&&(x.faster&&R.push(Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u0440\u0430\u0441\u043f\u0438\u043b"}),Object(p.jsx)("td",{children:g((+t.PRICE_PERCENT_FAST-1)*M)})]})),x.inbox&&R.push(Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430"}),Object(p.jsx)("td",{children:g(+t.PRICE_TAPE)})]})),x.poddon&&R.push(Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"\u041d\u0430 \u043f\u043e\u0434\u0434\u043e\u043d"}),Object(p.jsx)("td",{children:g(+t.PRICE_PALLET)})]}))),x&&x.faster&&(M*=+t.PRICE_PERCENT_FAST),a)return g(M);if(s){var H=[["\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",t.SHEET_NAME],["\u0420\u0430\u0437\u043c\u0435\u0440","".concat(t.SHEET_WIDTH," x ").concat(t.SHEET_LENGHT)],["\u0426\u0435\u043d\u0430 \u0437\u0430 \u043b\u0438\u0441\u0442",t.SHEET_PRICE],["\u041b\u0438\u0441\u0442\u043e\u0432 \u0432 \u0440\u0430\u0441\u043a\u0440\u043e\u0435",r],["\u0412\u0441\u0435\u0433\u043e \u0434\u0435\u0442\u0430\u043b\u0435\u0439",j(e.details,t).details],["<b>\u0418\u0442\u043e\u0433\u043e</b>","<b>".concat(g(M),"</b>")],["\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",!1],["\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",g(w)],["\u0440\u0435\u0437",g(k)],["\u043a\u0440\u043e\u043c\u043b\u0435\u043d\u0438\u0435",g(E)],["\u043a\u0440\u0438\u0432\u043e\u043b\u0438\u043d\u0435\u0439\u043d\u043e\u0441\u0442\u044c",g(I)],["\u043f\u0435\u0442\u043b\u0438",g(T)],["\u043f\u0430\u0437\u044b",g(_)]];return x&&(x.faster&&H.push(["\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u0440\u0430\u0441\u043f\u0438\u043b",g((+t.PRICE_PERCENT_FAST-1)*M)]),x.inbox&&H.push(["\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430",g(+t.PRICE_TAPE)]),x.poddon&&H.push(["\u041d\u0430 \u043f\u043e\u0434\u0434\u043e\u043d",g(+t.PRICE_PALLET)])),JSON.stringify(H)}return Object(p.jsx)("table",{className:"w100p",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"}),Object(p.jsx)("td",{children:g(w)})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"\u0420\u0435\u0437"}),Object(p.jsx)("td",{children:g(k)})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"\u041a\u0440\u043e\u043c\u043b\u0435\u043d\u0438\u0435"}),Object(p.jsx)("td",{children:g(E)})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"\u041a\u0440\u0438\u0432\u043e\u043b\u0438\u043d\u0435\u0439\u043d\u043e\u0441\u0442\u044c"}),Object(p.jsx)("td",{children:g(I)})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"\u041f\u0435\u0442\u043b\u0438"}),Object(p.jsx)("td",{children:g(T)})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"\u041f\u0430\u0437\u044b"}),Object(p.jsx)("td",{children:g(_)})]}),R]})})}function g(e){return e.toFixed(1).replace(/\d(?=(\d{3})+\.)/g,"$&,")+" \u0440\u0443\u0431."}var O=n(4),f=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={mess:"",orderCreate:!1},e.setRequest=function(t){if(t.preventDefault(),void 0!==e.state.username&&void 0!==e.state.useremail&&void 0!==e.state.userphone){var n=v(e.props.data,e.state),a=e.props.svgs,s=e.props.data.importOptions.REQUEST_URL,c=new FormData;c.append("order",n),c.append("svg",JSON.stringify(a)),c.append("mailto",e.props.data.importOptions.MAILTO),c.append("mailfrom",e.props.data.importOptions.MAIL_FROM),c.append("subtotal_table_data",m(e.props.data,e.props.data.importOptions,!1,!0)),e.setState({mess:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0437\u0430\u044f\u0432\u043a\u0438..."},(function(){return fetch(s,{method:"POST",body:c}).then((function(e){return e.text()})).then((function(t){if("ok"===t){e.setState({mess:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442 \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443. \u0412 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 20 \u043c\u0438\u043d\u0443\u0442(\u043a\u0440\u043e\u043c\u0435 \u0432\u044b\u0445\u043e\u0434\u043d\u044b\u0445) \u0441 \u0412\u0430\u043c\u0438 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u043d\u0430\u0448\u0435\u0439 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0438 \u0443\u0442\u043e\u0447\u043d\u0438\u0442 \u0441\u0440\u043e\u043a\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0437\u0430\u043a\u0430\u0437\u0430.",orderCreate:!0},(function(){e.props.afterCreateOrderFunc()}))}else e.setState({mess:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})}),(function(t){e.setState({mess:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430 #"+t})}))}))}else e.setState({mess:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"})},e.heandleChange=function(t){var n,a=t.target,s=a.name,c="checkbox"===a.type?a.checked:a.value;e.setState((n={},Object(O.a)(n,s,c),Object(O.a)(n,"mess",""),n),(function(){"faster"!==s&&"inbox"!==s&&"poddon"!==s||e.props.setOrderDataFunc(s,e.state[s])}))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.billingOptions,n=this.state.mess?Object(p.jsx)("div",{id:"message",children:this.state.mess}):"";return this.state.orderCreate?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{id:"calc-form-controlls-wrapper",children:Object(p.jsx)("button",{className:"btn",onClick:this.props.toOrderFunc,children:"\u041d\u0430\u0437\u0430\u0434 \u043a \u0441\u043f\u0438\u0441\u043a\u0443"})}),n]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(b,{set:e,options:e.importOptions}),Object(p.jsx)("h4",{className:"tac",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0443 \u043d\u0438\u0436\u0435"}),Object(p.jsxs)("form",{onSubmit:this.setRequest,id:"checkoutForm",children:[Object(p.jsxs)("fieldset",{className:"flex w100p",children:[Object(p.jsx)("legend",{children:"\u0412\u0430\u0448\u0438 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(p.jsx)("label",{className:"reqiured-field",children:Object(p.jsx)("input",{type:"text",name:"username",required:!0,defaultValue:this.state.username,placeholder:"\u0424\u0418\u041e",onChange:this.heandleChange})}),Object(p.jsx)("label",{className:"reqiured-field",children:Object(p.jsx)("input",{type:"phone",name:"userphone",required:!0,defaultValue:this.state.userphone,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",onChange:this.heandleChange})}),Object(p.jsx)("label",{className:"reqiured-field",children:Object(p.jsx)("input",{type:"email",name:"useremail",required:!0,defaultValue:this.state.useremail,placeholder:"\u0412\u0430\u0448 email",onChange:this.heandleChange})}),Object(p.jsx)("label",{className:"",children:Object(p.jsx)("textarea",{name:"usercomment",defaultValue:this.state.usercomment,placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443",onChange:this.heandleChange})})]}),Object(p.jsxs)("fieldset",{className:"flex w100p",children:[Object(p.jsx)("legend",{children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"}),Object(p.jsxs)("label",{className:"flex-center",children:[Object(p.jsx)("span",{className:"fons12",children:"\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u0440\u0430\u0441\u043f\u0438\u043b"}),Object(p.jsx)("input",{type:"checkbox",name:"faster",checked:t.faster,onChange:this.heandleChange})]}),Object(p.jsxs)("label",{className:"flex-center",children:[Object(p.jsx)("span",{className:"fons12",children:"\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430 \u0432 \u043f\u043b\u0451\u043d\u043a\u0443"}),Object(p.jsx)("input",{type:"checkbox",name:"inbox",checked:t.inbox,onChange:this.heandleChange})]}),Object(p.jsxs)("label",{className:"flex-center",children:[Object(p.jsx)("span",{className:"fons12",children:"\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430 \u043d\u0430 \u043f\u043e\u0434\u0434\u043e\u043d"}),Object(p.jsx)("input",{type:"checkbox",name:"poddon",checked:t.poddon,onChange:this.heandleChange})]})]}),Object(p.jsxs)("fieldset",{className:"w100p",children:[Object(p.jsx)("legend",{children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),Object(p.jsx)("label",{children:Object(p.jsx)("input",{type:"text",name:"billingaddress",defaultValue:this.state.billingaddress,placeholder:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",onChange:this.heandleChange})})]})]}),Object(p.jsxs)("div",{id:"calc-form-controlls-wrapper",children:[Object(p.jsx)("button",{className:"btn",onClick:this.props.toOrderFunc,children:"\u041d\u0430\u0437\u0430\u0434 \u043a \u0441\u043f\u0438\u0441\u043a\u0443"}),Object(p.jsx)("button",{className:"btn",onClick:this.setRequest,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),n]})}}]),n}(s.a.Component);function v(e,t){var n=e.details,a=e.importOptions,s=new Date,c="",i=[[c],["\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a","".concat(t.username," ").concat(t.userphone," ").concat(t.useremail),c,c,c,"\u0434\u0430\u0442\u0430",N(s)],[c],["\u0426\u0432\u0435\u0442 \u043f\u043b\u0438\u0442\u044b",a.SHEET_COLOR,c,"\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u043f\u043b\u0438\u0442\u044b",a.SHEET_DEPTH],[c],["\u0426\u0432\u0435\u0442 \u043a\u0440\u043e\u043c\u043a\u0438",c,"\u041e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",c],["\u0426\u0432\u0435\u0442 \u043a\u0440\u043e\u043c\u043a\u0438",c,"\u041e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",c],["\u0426\u0432\u0435\u0442 \u043a\u0440\u043e\u043c\u043a\u0438",c,"\u041e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",c],[c],["\u041f\u041e\u0417\u0418\u0426\u0418\u042f","\u0414\u043b\u0438\u043d\u0430","\u0428\u0438\u0440\u0438\u043d\u0430","\u041a\u043e\u043b-\u0432\u043e","\u041a\u0440\u043e\u043c\u0430 L1","\u041a\u0440\u043e\u043c\u0430 L2","\u041a\u0440\u043e\u043c\u0430 W1","\u041a\u0440\u043e\u043c\u0430 W2","\u041f\u0430\u0437","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"],[c]],r=1;return n.forEach((function(e,n){var a=e.textureRotate,s=e.nominalwidth,c=e.nominalheight,o=e.edge.left>0?e.edge.left:"",l=e.edge.right>0?e.edge.right:"",h=e.edge.top>0?e.edge.top:"",d=e.edge.bot>0?e.edge.bot:"";0===a&&(s=e.nominalheight,c=e.nominalwidth),0===a&&(o=e.edge.top,l=e.edge.bot,h=e.edge.right,d=e.edge.left);var p=["".concat(r),c,s,e.count,o,l,h,d,S(e.groove?e.groove:""),y(e,t)];i.push(p),r++})),JSON.stringify(i)}function y(e,t){var n="",a="\n";return e.lt.x>0&&e.lt.y>0&&(n+="\u041b\u0435\u0432\u044b\u0439 \u0432\u0435\u0440\u0445\u043d\u0438\u0439: ".concat(S(e.lt.type)," | X:").concat(e.lt.nomX," Y:").concat(e.lt.nomY)+a),e.rt.x>0&&e.rt.y>0&&(n+="\u041f\u0440\u0430\u0432\u044b\u0439 \u0432\u0435\u0440\u0445\u043d\u0438\u0439: ".concat(S(e.rt.type)," | X:").concat(e.rt.nomX," Y:").concat(e.rt.nomY)+a),e.rb.x>0&&e.rb.y>0&&(n+="\u041f\u0440\u0430\u0432\u044b\u0439 \u043d\u0438\u0436\u043d\u0438\u0439: ".concat(S(e.rb.type)," | X:").concat(e.rb.nomX," Y:").concat(e.rb.nomY)+a),e.lb.x>0&&e.lb.y>0&&(n+="\u041b\u0435\u0432\u044b\u0439 \u043d\u0438\u0436\u043d\u0438\u0439: ".concat(S(e.lb.type)," | X:").concat(e.lb.nomX," Y:").concat(e.lb.nomY)+a),e.loops&&"none"!==e.loops.side&&(n+="\u041a\u043e\u043b-\u0432\u043e \u043f\u0435\u0442\u0435\u043b\u044c: ".concat(e.loops.count)+a,n+="\u0421\u0442\u043e\u0440\u043e\u043d\u0430: ".concat(S(e.loops.side))+a,n+="\u0414\u043e \u043f\u0435\u0440\u0432\u043e\u0439: ".concat(e.loops.beforeNominal)+a,n+="\u0414\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439: ".concat(e.loops.afterNominal)+a),t.faster&&(n+="\u0421\u0440\u043e\u0447\u043d\u044b\u0439 \u0440\u0430\u0441\u043f\u0438\u043b - \u0434\u0430\n"),t.inbox&&(n+="\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430 \u0432 \u043f\u043b\u0451\u043d\u043a\u0443 - \u0434\u0430\n"),t.poddon&&(n+="\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430 \u0432 \u043f\u043e\u0434\u0434\u043e\u043d - \u0434\u0430\n"),e.comment&&(n+="\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0434\u0435\u0442\u0430\u043b\u0438:"+e.comment+a),n}function N(e){var t=e.getDate();t<10&&(t="0"+t);var n=e.getMonth()+1;n<10&&(n="0"+n);var a=e.getFullYear()%100;return a<10&&(a="0"+a),t+"."+n+"."+a}function S(e){return"left"===e?"\u0441\u043b\u0435\u0432\u0430":"top"===e?"\u0441\u0432\u0435\u0440\u0445\u0443":"right"===e?"\u0441\u043f\u0440\u0430\u0432\u0430":"bot"===e?"\u0441\u043d\u0438\u0437\u0443":"outside"===e?"\u041d\u0430\u0440\u0443\u0436\u043d\u044b\u0439":"linear"===e?"\u041f\u0440\u044f\u043c\u043e\u0439":"inside"===e?"\u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439":e}var C=n(11);function E(e){var t=e.set,n=t.width,a=t.height,s=t.textureRotate,c=0===s?(70+n)/2-40:(70+n)/2+60,i=0===s?(70+a)/2+40:(70+a)/2+100;return Object(p.jsx)("text",{fontSize:"400%",fill:"#999999",transform:"rotate(".concat(-s,",").concat(c,",").concat(i,")"),x:c,y:i,children:">>>>>"})}var w=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"prepareNumber",value:function(e){return e}},{key:"scalingW",value:function(e,t){return e/(t.width/t.nominalwidth)}},{key:"scalingH",value:function(e,t){return e/(t.height/t.nominalheight)}},{key:"enscalingW",value:function(e,t){return e/(t.nominalwidth/t.width)}},{key:"enscalingH",value:function(e,t){return e/(t.nominalheight/t.height)}},{key:"enscalingAny",value:function(e,t,n){var a="left"===n||"right"===n?"height":"width";return t.nominalwidth>=500?e/(t["nominal"+a]/t[a]):e}},{key:"descalingAny",value:function(e,t,n){var a="left"===n||"right"===n?"height":"width";return t.nominalwidth>=500?Math.trunc((e-70)*(t["nominal"+a]/t[a])):e}},{key:"descalingAnyV2",value:function(e,t,n){var a="left"===n||"right"===n?"height":"width";return t.nominalwidth>=500?Math.trunc(e*(t["nominal"+a]/t[a])):e}}]),e}(),k=new w,I=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={side:"none",count:2,before:100,after:200,minSpace:50,error:!1},e.handleInputChange=function(t){var n,a=t.target.name,s=t.target.value,c=t.target.closest(".detail").dataset.key,i=e.state.count-1,r=Math.round((e.state.after-e.state.before)/i,1),o=e.props.set;if("number"===t.target.type){var l=t.target.max;+s>+l&&(s=l)}e.setState((n={},Object(O.a)(n,a,s),Object(O.a)(n,"error",!1),n),(function(){if(!("count"===a&&r<e.state.minSpace)){var t=k.enscalingAny(e.state.before,o,e.state.side),n=k.enscalingAny(e.state.after,o,e.state.side),i={side:"side"===a?s:e.state.side,count:e.state.count,before:t,beforeNominal:e.state.before,after:n,afterNominal:e.state.after,minSpace:e.state.minSpace};e.props.func(i,c)}}))},e.isFree=function(e,t,n){return!("groove"!==e&&!t&&!n)||!!e&&void 0},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.side,n=e.before,a=e.after,s=e.minSpace,c=this.props.set,i=2*+s,r=a-2*s,o="top"===t||"bot"===t?c.nominalwidth-2*s:c.nominalheight-2*s,l=2*+s+ +n,h=Math.round((a-n)/s)+1,d=0!==+c.lt.x,j=0!==+c.rt.x,b=0!==+c.rb.x,x=0!==+c.lb.x,u=c.reserve,m=this.isFree(u.left,d,x),g=this.isFree(u.top,d,j),O=this.isFree(u.right,j,b),f=this.isFree(u.bot,b,x);return c.nominalwidth<150&&(g=f=!0),c.nominalheight<150&&(m=O=!0),"groove"===u.left||"groove"===u.top||"groove"===u.right||"groove"===u.bot?Object(p.jsx)("span",{className:"fons12 red",children:"\u041f\u0435\u0442\u043b\u0438 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u044b \u0441 \u043f\u0430\u0437\u0430\u043c\u0438"}):m&&g&&O&&f?Object(p.jsx)("span",{className:"fons12 red",children:"\u041d\u0435\u0442 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("label",{className:"flex-center",children:[Object(p.jsx)("span",{children:"\u0421\u0442\u043e\u0440\u043e\u043d\u0430"}),Object(p.jsxs)("select",{onChange:this.handleInputChange,name:"side",defaultValue:"none",value:c.loops.side,children:[Object(p.jsx)("option",{value:"none",children:"\u041d\u0435\u0442"},"loopnone"),Object(p.jsxs)("option",{value:"left",disabled:m,children:["\u0421\u043b\u0435\u0432\u0430",m&&" (\u0437\u0430\u043d\u044f\u0442\u043e)"]},"loopleft"),Object(p.jsxs)("option",{value:"top",disabled:g,children:["\u0421\u0432\u0435\u0440\u0445\u0443",g&&" (\u0437\u0430\u043d\u044f\u0442\u043e)"]},"looptop"),Object(p.jsxs)("option",{value:"right",disabled:O,children:["\u0421\u043f\u0440\u0430\u0432\u0430",O&&" (\u0437\u0430\u043d\u044f\u0442\u043e)"]},"loopright"),Object(p.jsxs)("option",{value:"bot",disabled:f,children:["\u0421\u043d\u0438\u0437\u0443",f&&" (\u0437\u0430\u043d\u044f\u0442\u043e)"]},"loopbot")]})]}),Object(p.jsx)("label",{className:"flex-center ml-a",children:Object(p.jsxs)("span",{className:"fons12",children:["\u041e\u0442 \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e/\u043d\u0438\u0436\u043d\u0435\u0433\u043e \u043a\u0440\u0430\u044f \u043e\u0442\u0441\u0442\u0443\u043f \u043e\u0442\u0432\u0435\u0440\u0441\u0442\u0438\u0439 ",i,"\u043c\u043c."]})}),Object(p.jsx)("div",{className:"w100p"}),"none"!==this.state.side&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("label",{className:"flex-center",children:[Object(p.jsxs)("span",{children:["\u0414\u043e\xa0\u043f\u0435\u0440\u0432\u043e\u0439 ",Object(p.jsx)("br",{}),"\u043f\u0435\u0442\u043b\u0438, \u043c\u043c"]}),Object(p.jsx)("input",{onInput:this.handleInputChange,name:"before",type:"number",min:i,max:r,step:"1",value:this.state.before.toString()}),Object(p.jsxs)("span",{children:["max: ",Object(p.jsx)("b",{children:r}),"\xa0\u043c\u043c"]})]}),Object(p.jsxs)("label",{className:"flex-center",children:[Object(p.jsxs)("span",{children:["\u0414\u043e\xa0\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 ",Object(p.jsx)("br",{}),"\u043f\u0435\u0442\u043b\u0438, \u043c\u043c"]}),Object(p.jsx)("input",{onInput:this.handleInputChange,name:"after",type:"number",min:l,max:o,step:"1",value:this.state.after.toString()}),Object(p.jsxs)("span",{children:["max: ",Object(p.jsx)("b",{children:o}),"\xa0\u043c\u043c"]})]}),Object(p.jsxs)("label",{className:"flex-center",children:[Object(p.jsx)("span",{children:"\u041a\u043e\u043b-\u0432\u043e, \u0448\u0442"}),Object(p.jsx)("input",{className:this.state.error?"error":"",onInput:this.handleInputChange,name:"count",type:"number",min:"2",max:h,step:"1",defaultValue:"2"})]})]})]})}}]),n}(s.a.Component);function T(e){var t=e.set,n=e.m,a=t.loops,s=k.enscalingAny(25,t,a.side),c=k.enscalingAny(17.5,t,a.side);if(void 0===a.side||"none"===a.side)return"";var i=t.width,r=t.height,o=[];if("left"===a.side?(o.push(Object(p.jsx)("path",{d:"M ".concat(n+s," ").concat(n," v ").concat(r),stroke:"#72aee6",strokeDasharray:"10",fill:"transparent"},"lpath")),o.push(Object(p.jsx)(_,{set:t,side:a.side,nominal:+a.beforeNominal,cx:n+s,cy:+a.before+n,r:c,m:n},"lbefore")),o.push(Object(p.jsx)(_,{set:t,side:a.side,nominal:+a.afterNominal,cx:n+s,cy:+a.after+n,r:c,m:n},"lafter"))):"top"===a.side?(o.push(Object(p.jsx)("path",{d:"M ".concat(n," ").concat(n+s," h ").concat(i),stroke:"#72aee6",strokeDasharray:"10",fill:"transparent"},"tpath")),o.push(Object(p.jsx)(_,{set:t,side:a.side,nominal:+a.beforeNominal,cx:+a.before+n,cy:n+s,r:c,m:n},"tbefore")),o.push(Object(p.jsx)(_,{set:t,side:a.side,nominal:+a.afterNominal,cx:+a.after+n,cy:n+s,r:c,m:n},"tafter"))):"right"===a.side?(o.push(Object(p.jsx)("path",{d:"M ".concat(n+i-s," ").concat(n," v ").concat(r),stroke:"#72aee6",strokeDasharray:"10",fill:"transparent"},"rpath")),o.push(Object(p.jsx)(_,{set:t,side:a.side,nominal:+a.beforeNominal,cx:n+i-s,cy:+a.before+n,r:c,m:n},"rbefore")),o.push(Object(p.jsx)(_,{set:t,side:a.side,nominal:+a.afterNominal,cx:n+i-s,cy:+a.after+n,r:c,m:n},"rafter"))):"bot"===a.side&&(o.push(Object(p.jsx)("path",{d:"M ".concat(n," ").concat(r+n-s," h ").concat(i),stroke:"#72aee6",strokeDasharray:"10",fill:"transparent"},"bpath")),o.push(Object(p.jsx)(_,{set:t,side:a.side,nominal:+a.beforeNominal,cx:+a.before+n,cy:r+n-s,r:c,m:n},"bbefore")),o.push(Object(p.jsx)(_,{set:t,side:a.side,nominal:+a.afterNominal,cx:+a.after+n,cy:r+n-s,r:c,m:n},"bafter"))),a.count>2)for(var l=a.count-1,h=a.before,d=a.after,j=+a.beforeNominal,b=(+a.afterNominal-j)/l,x=(d-h)/l,u=1;u<l;u++){var m=n+s,g=+a.before+x*u+n,O=j+b*u+n;"top"===a.side?(g=n+s,m=+a.before+x*u+n,O=j+b*u+n):"right"===a.side?(m=i+n-s,g=+a.before+x*u+n,O=j+b*u+n):"bot"===a.side&&(g=r+n-s,m=+a.before+x*u+n,O=j+b*u+n),o.push(Object(p.jsx)(_,{nominal:O,cx:m,cy:g,r:c,width:i,height:r,side:a.side,set:t,m:n},"".concat(m,"-").concat(g,"-").concat(u)))}return o}function _(e){var t=e.set,n=e.side,a="M ".concat(e.cx," ").concat(e.cy," h ").concat(e.r+20),s=e.cx+45,c=e.cy+8;k.descalingAny(e.cy,t,n);"top"===n?(a="M ".concat(e.cx," ").concat(e.cy," v ").concat(e.r+20),s=e.cx-23,c=e.cy+60,k.descalingAny(e.cx,t,n)):"right"===n?(a="M ".concat(e.cx," ").concat(e.cy," h -").concat(e.r+20),s=e.cx-90,c=e.cy+10,k.descalingAny(e.cy,t,n)):"bot"===n&&(a="M ".concat(e.cx," ").concat(e.cy," v -").concat(e.r+20),s=e.cx-20,c=e.cy-50,k.descalingAny(e.cx,t,n));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("circle",{cx:e.cx,cy:e.cy,r:e.r,stroke:"#3b8ecc",fill:"#3b8ecc"}),Object(p.jsx)("path",{d:a,stroke:"#3b8ecc"}),Object(p.jsx)("text",{transform:"rotate(".concat(0,",").concat(s,",").concat(c,")"),fill:"#3b8ecc",fontSize:"150%",x:s,y:c,children:Math.floor(e.nominal)})]})}var F=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).handleInputChange=function(t){var n,a=t.target.name,s=t.target.value,c=t.target.closest(".detail").dataset.key;e.setState((n={},Object(O.a)(n,a,s),Object(O.a)(n,"error",!1),n),(function(){e.props.func(e.state.side,c)}))},e.isFree=function(e,t,n){return!("loops"!==e&&!t&&!n)||!!e&&void 0},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.set,t=0!==+e.lt.x,n=0!==+e.rt.x,a=0!==+e.rb.x,s=0!==+e.lb.x,c=e.reserve,i=this.isFree(c.left,t,s),r=this.isFree(c.top,t,n),o=this.isFree(c.right,n,a),l=this.isFree(c.bot,a,s);return"loops"===c.left||"loops"===c.top||"loops"===c.right||"loops"===c.bot?Object(p.jsx)("span",{className:"fons12 red",children:"\u041f\u0430\u0437\u044b \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u044b \u0441 \u043f\u0435\u0442\u043b\u044f\u043c\u0438"}):i&&r&&o&&l?Object(p.jsx)("span",{className:"fons12 red",children:"\u041d\u0435\u0442 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"}):Object(p.jsxs)("div",{className:"flex-nowrap flex-center",children:[Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u0421\u0442\u043e\u0440\u043e\u043d\u0430"}),Object(p.jsxs)("select",{onChange:this.handleInputChange,name:"side",value:e.groove,children:[Object(p.jsx)("option",{value:"none",children:"\u041d\u0435\u0442"}),Object(p.jsxs)("option",{value:"left",disabled:i,children:["\u0421\u043b\u0435\u0432\u0430",i&&" (\u0437\u0430\u043d\u044f\u0442\u043e)"]}),Object(p.jsxs)("option",{value:"top",disabled:r,children:["\u0421\u0432\u0435\u0440\u0445\u0443",r&&" (\u0437\u0430\u043d\u044f\u0442\u043e)"]}),Object(p.jsxs)("option",{value:"right",disabled:o,children:["\u0421\u043f\u0440\u0430\u0432\u0430",o&&" (\u0437\u0430\u043d\u044f\u0442\u043e)"]}),Object(p.jsxs)("option",{value:"bot",disabled:l,children:["\u0421\u043d\u0438\u0437\u0443",l&&" (\u0437\u0430\u043d\u044f\u0442\u043e)"]})]})]}),Object(p.jsxs)("span",{className:"fons12",children:[Object(p.jsx)("b",{children:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0430\u0437\u0430: "}),"\u0433\u043b\u0443\u0431\u0438\u043d\u0430 8 \u043c\u043c, \u0448\u0438\u0440\u0438\u043d\u0430 4 \u043c\u043c, \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043e\u0442 \u043a\u0440\u0430\u044f 16 \u043c\u043c (20 \u043c\u043c \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u043f\u0430\u0437\u043e\u043c)"]})]})}}]),n}(s.a.Component);function D(e){var t=e.set,n=e.m,a=t.groove;if(!a)return"";var s=t.grooveIndent,c=t.grooveWidth,i=n,r=n,o="left"===a||"right"===a?"v":"h",l="h"===o?t.width:t.height;return"left"===a&&(i=n+s),l*=-1,"top"===a&&(r=n+s),"right"===a&&(i=n+ +t.width-s),"bot"===a&&(r=+t.height+n-s),l*=-1,Object(p.jsx)("path",{d:"M ".concat(i," ").concat(r," ").concat(o," ").concat(l),stroke:"green",strokeWidth:c,fill:"transparent"})}var M=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={left:"0.0",top:"0.0",right:"0.0",bot:"0.0"},e.handleChange=function(t){var n=e.props.set,a=n.lt.x>0,s=n.rt.x>0,c=n.rb.x>0,i=n.lb.x>0,r=t.target.name,o=t.target.value,l=t.target.closest(".detail").dataset.key,h=Object(O.a)({},r,o);"left"===r&&a?h.top=o:"left"===r&&i?h.bot=o:"top"===r&&a?h.left=o:"top"===r&&s?h.right=o:"right"===r&&s?h.top=o:"right"===r&&c?h.bot=o:"bot"===r&&c?h.right=o:"bot"===r&&i&&(h.left=o),e.setState(h,(function(){e.props.func(e.state,l)}))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.set,t=e.edge.left,n=e.edge.top,a=e.edge.right,s=e.edge.bot,c=e.edgeMin,i=e.edgeMax,r=this.props.query;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u0421\u043b\u0435\u0432\u0430"}),Object(p.jsxs)("select",{tabIndex:r+"4",onChange:this.handleChange,name:"left",value:t,children:[Object(p.jsx)("option",{value:"0.0",children:"0.0"}),Object(p.jsx)("option",{value:c,children:c}),Object(p.jsx)("option",{value:i,children:i})]})]}),Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u0421\u0432\u0435\u0440\u0445\u0443"}),Object(p.jsxs)("select",{tabIndex:r+"5",onChange:this.handleChange,name:"top",value:n,children:[Object(p.jsx)("option",{value:"0.0",children:"0.0"}),Object(p.jsx)("option",{value:c,children:c}),Object(p.jsx)("option",{value:i,children:i})]})]}),Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u0421\u043f\u0440\u0430\u0432\u0430"}),Object(p.jsxs)("select",{tabIndex:r+"6",onChange:this.handleChange,name:"right",value:a,children:[Object(p.jsx)("option",{value:"0.0",children:"0.0"}),Object(p.jsx)("option",{value:c,children:c}),Object(p.jsx)("option",{value:i,children:i})]})]}),Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u0421\u043d\u0438\u0437\u0443"}),Object(p.jsxs)("select",{tabIndex:r+"7",onChange:this.handleChange,name:"bot",value:s,children:[Object(p.jsx)("option",{value:"0.0",children:"0.0"}),Object(p.jsx)("option",{value:c,children:c}),Object(p.jsx)("option",{value:i,children:i})]})]})]})}}]),n}(s.a.Component);function R(e){var t=e.set,n=e.m,a=t.width,s=t.height,c=100,i=n+t.height+10,r=n+t.width+10,o="green",l="130%";return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("path",{d:"M ".concat(n-7," ").concat((n+s)/2-50," v ").concat(c),stroke:o,strokeDasharray:"15,10",strokeWidth:"3",fill:"transparent"}),Object(p.jsx)("text",{fontSize:l,x:n-27,y:s/2+50,transform:"rotate(-90,".concat(n-27,",").concat(s/2+40,")"),fill:o,children:t.edge.left}),Object(p.jsx)("path",{d:"M ".concat((a+n)/2," ").concat(i," h ").concat(c),stroke:o,strokeDasharray:"15,10",strokeWidth:"3",fill:"transparent"}),Object(p.jsx)("text",{fontSize:l,x:(a+n)/2+20,y:s+n+40,fill:o,children:t.edge.bot}),Object(p.jsx)("path",{d:"M ".concat(r," ").concat((n+s)/2," v ").concat(c),stroke:o,strokeDasharray:"15,10",strokeWidth:"3",fill:"transparent"}),Object(p.jsx)("text",{fontSize:l,x:r+25,y:(n+s)/2+70,transform:"rotate(-90,".concat(r+25,",").concat((n+s)/2+60,")"),fill:o,children:t.edge.right}),Object(p.jsx)("path",{d:"M ".concat((n+a)/2," ").concat(n-7," h ").concat(c),stroke:o,strokeDasharray:"15,10",strokeWidth:"3",fill:"transparent"}),Object(p.jsx)("text",{fontSize:l,x:(n+a)/2+20,y:n-16,fill:o,children:t.edge.top})]})}function H(e,t,n){var a=Math.abs(e);return a<t?t:a>n?n:a}function A(e){var t=e.set,n=t.width,a=t.nominalwidth,s=t.minWidth,c=t.maxWidth,i=t.height,r=t.nominalheight,o=t.minHeight,l=t.maxHeight,h=t.lt,d=t.rt,j=t.lb,b=t.rb,x=70,u=window.importOptions;n=H(n,s,c),i=H(i,o,l),a>=500&&(i=t.height=Math.round(500/(Math.round(a/r*10,-1)/10))),i<200&&(i=t.height=200);var m="M ".concat(x," ").concat(h.x+x," Q ").concat(function(e,t){if("outside"===t.type)return"".concat(e," ").concat(e);if("linear"===t.type)return"".concat(t.x/2+e," ").concat(t.y/2+e);if("inside"===t.type)return"".concat(+t.x+e," ").concat(+t.y+e)}(x,h)," ").concat(h.y+x," ").concat(x),g=" L ".concat(n-d.y+x," ").concat(x),O=" Q ".concat(function(e,t,n){if("outside"===t.type)return"".concat(+n.width+e," ").concat(e);if("linear"===t.type)return"".concat(+n.width-t.y/2+e," ").concat(t.x/2+e);if("inside"===t.type)return"".concat(+n.width-t.y+e," ").concat(+t.x+e)}(x,d,t)," ").concat(n+x," ").concat(+d.x+x),f=" L ".concat(n+x," ").concat(i-b.x+x),v=" Q ".concat(function(e,t,n){if("outside"===t.type)return"".concat(+n.width+e," ").concat(+n.height+e);if("linear"===t.type)return"".concat(+n.width-t.y/2+e," ").concat(+n.height-t.x/2+e);if("inside"===t.type)return"".concat(+n.width-t.y+e," ").concat(+n.height-t.x+e)}(x,b,t)," ").concat(n-b.y+x," ").concat(i+x),y=" L ".concat(+j.y+x," ").concat(i+x),N=" Q ".concat(function(e,t,n){if("outside"===t.type)return"".concat(e," ").concat(+n.height+e);if("linear"===t.type)return"".concat(+t.y/2+e," ").concat(+n.height-t.x/2+e);if("inside"===t.type)return"".concat(+t.y+e," ").concat(+n.height-t.x+e)}(x,j,t)," ").concat(x," ").concat(i-j.x+x),S="brown",C="150%",w="bg-".concat(e.id),k=Object(p.jsx)("rect",{x:x,y:x,width:1e3,height:1e3,fill:"url(#".concat(w,")")});return t.textureRotate>0&&(k=Object(p.jsx)("rect",{x:x+n,y:x,width:1e3,height:1e3,fill:"url(#".concat(w,")"),transform:"rotate(90,".concat(x+n,",").concat(x,")")})),Object(p.jsxs)("svg",{id:e.id,xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 "+(n+140)+" "+(i+140),children:[Object(p.jsxs)("defs",{children:[Object(p.jsx)("pattern",{id:w,height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",viewBox:"".concat(x," ").concat(x," ").concat(n," ").concat(i),preserveAspectRatio:"xMidYMid slice",children:Object(p.jsx)("image",{href:u.TEXTURE_IMAGE_URL,preserveAspectRatio:"xMidYMid slice",x:x,y:x,opacity:"0.5",width:"100%",height:"100%"})}),Object(p.jsx)("pattern",{id:"".concat(w,"-copy"),height:"100%",width:"100%",patternContentUnits:"objectBoundingBox",viewBox:"".concat(x," ").concat(x," ").concat(n," ").concat(i),preserveAspectRatio:"xMidYMid slice",children:k})]}),Object(p.jsx)("path",{d:m+g+O+f+v+y+N+" z",stroke:"#333333",strokeWidth:"3",strokeLinejoin:"miter",fill:"url(#".concat(w,"-copy)"),opacity:"0.7"}),Object(p.jsx)("path",{d:"M ".concat(x," ").concat(Math.abs(h.x)+x," v -").concat(h.x," h ").concat(h.y),strokeWidth:"2",stroke:S,strokeDasharray:"10",fill:"transparent"}),Object(p.jsxs)("text",{fill:S,fontSize:C,x:-30,y:135,transform:"rotate(-90,".concat(20,",",96,")"),children:[h.nomX,"\u043c\u043c"]}),Object(p.jsxs)("text",{fill:S,fontSize:C,x:80,y:60,children:[h.nomY,"\u043c\u043c"]}),Object(p.jsx)("path",{d:"M ".concat(n+x," ").concat(Math.abs(d.x)+x," v -").concat(d.x," h -").concat(d.y),strokeWidth:"3",stroke:S,strokeDasharray:"10",fill:"transparent"}),Object(p.jsxs)("text",{fill:S,fontSize:C,x:n+x-70,y:60,children:[d.nomY,"\u043c\u043c"]}),Object(p.jsxs)("text",{fill:S,fontSize:C,x:n+x-20,y:120,transform:"rotate(-90,".concat(n+x+10,",").concat(100,")"),children:[d.nomX,"\u043c\u043c"]}),Object(p.jsx)("path",{d:"M ".concat(n+x," ").concat(i-b.x+x," v ").concat(b.x," h -").concat(b.y),strokeWidth:"3",stroke:S,strokeDasharray:"10",fill:"transparent"}),Object(p.jsxs)("text",{fill:S,fontSize:C,x:n+x-70,y:i+x+30,children:[b.nomY,"\u043c\u043c"]}),Object(p.jsxs)("text",{fill:S,fontSize:C,x:n+x-20,y:i+x+20,transform:"rotate(-90,".concat(n+x-20,",").concat(i+x-30,")"),children:[b.nomX,"\u043c\u043c"]}),Object(p.jsx)("path",{d:"M ".concat(x," ").concat(i-j.x+x," v ").concat(+j.x," h ").concat(+j.y),strokeWidth:"3",stroke:S,strokeDasharray:"10",fill:"transparent"}),Object(p.jsxs)("text",{fill:S,fontSize:C,x:80,y:i+x+30,children:[j.nomY,"\u043c\u043c"]}),Object(p.jsxs)("text",{fill:S,fontSize:C,x:60,y:i+x-10,transform:"rotate(-90,".concat(60,",").concat(i+x-10,")"),children:[j.nomX,"\u043c\u043c"]}),Object(p.jsxs)("text",{fontSize:C,x:(x+n)/2,y:20,children:[a,"\u043c\u043c"]}),Object(p.jsxs)("text",{fontSize:C,transform:"rotate(-90,".concat(20,",",(x+i)/2,")"),x:-15,y:(x+i)/2,children:[r,"\u043c\u043c"]})," ",Object(p.jsx)(T,{set:t,m:x})," ",Object(p.jsx)(D,{set:t,m:x})," ",Object(p.jsx)(R,{set:t,m:x})," ",Object(p.jsx)(E,{set:t})]})}var L=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={active:!1,type:"outside",send:!0,x:0,y:0,nomX:0,nomY:0},e.handleInputChange=function(t){var n=t.target,a="checkbox"===n.type?n.checked:Math.abs(n.value),s=n.name;if("number"===n.type&&e.state.send){var c=n.dataset.break,i=n.max;a>i&&(a=i),e.setState({x:a<=c?a:c,y:a,nomX:a,nomY:a},(function(){return e.backToApp(n)}))}else{var r;e.setState((r={},Object(O.a)(r,s,a),Object(O.a)(r,"nomX","x"===s?a:e.state.x),Object(O.a)(r,"nomY","y"===s?a:e.state.y),r),(function(){return e.backToApp(n)}))}},e.backToApp=function(t){var n=e.state.x,a=e.state.y,s=e.props.set.width,c=e.props.set.nominalwidth,i=e.props.set.height,r=e.props.set.nominalheight;c>=500&&(n*=i/r,a*=s/c),e.props.func(e.props.angleName,{x:n,y:a,nomX:e.state.x,nomY:e.state.y,type:e.state.type,title:e.props.set[e.props.angleName].title,next:e.props.set[e.props.angleName].next,prev:e.props.set[e.props.angleName].prev},t.closest(".detail").dataset.key)},e.handleTypeChange=function(t){var n=t.target.name;e.setState({type:n},(function(){return e.backToApp(t.target)}))},e.handleInputActive=function(t){var n=t.target.checked;e.setState({active:n}),e.props.func(e.props.angleName,{x:n?e.state.x:0,y:n?e.state.y:0,nomX:e.state.nomX,nomY:e.state.nomY,type:e.state.type,title:e.props.set[e.props.angleName].title,next:e.props.set[e.props.angleName].next,prev:e.props.set[e.props.angleName].prev},t.target.closest(".detail").dataset.key)},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.set,n=t[t[this.props.angleName].next],a=t[t[this.props.angleName].prev],s=101,c=101;"lt"===this.props.angleName?(c=+t.nominalwidth-n.nomY,s=+t.nominalheight-a.nomX):"rt"===this.props.angleName?(c=+t.nominalwidth-a.nomX,s=+t.nominalheight-n.nomY):"rb"===this.props.angleName?(c=+t.nominalwidth-n.nomY,s=+t.nominalheight-a.nomX):(c=+t.nominalwidth-a.nomY,s=+t.nominalheight-n.nomX);var i=Object(p.jsx)("span",{children:Object(p.jsx)("input",{onChange:this.handleInputActive,type:"checkbox",name:"active",checked:this.state.active})}),r=[],o=t.reserve.left,l=t.reserve.top,h=t.reserve.right,d=t.reserve.bot,j="";return"loops"===o||"groove"===o?(r=["lb","lt"],j="loops"===o?"\u043f\u0435\u0442\u043b\u044f\u043c\u0438":"\u043f\u0430\u0437\u043e\u043c"):"loops"===l||"groove"===l?(r=["lt","rt"],j="loops"===l?"\u043f\u0435\u0442\u043b\u044f\u043c\u0438":"\u043f\u0430\u0437\u043e\u043c"):"loops"===h||"groove"===h?(r=["rt","rb"],j="loops"===h?"\u043f\u0435\u0442\u043b\u044f\u043c\u0438":"\u043f\u0430\u0437\u043e\u043c"):"loops"!==d&&"groove"!==d||(r=["rb","lb"],j="loops"===d?"\u043f\u0435\u0442\u043b\u044f\u043c\u0438":"\u043f\u0430\u0437\u043e\u043c"),r.forEach((function(t){e.props.angleName===t&&(i=Object(p.jsxs)("span",{className:"reserve-notice red",children:["\u0421\u0442\u043e\u0440\u043e\u043d\u0430 \u0437\u0430\u043d\u044f\u0442\u0430 ",j]}))})),this.state.active?Object(p.jsxs)("div",{className:"angle-options-wrapper ".concat(this.state.active&&"active"),children:[Object(p.jsxs)("div",{className:"angle-options-type w100p",children:[Object(p.jsxs)("label",{className:"angle-title-wrapper",children:[Object(p.jsx)("span",{className:"angle-title ".concat(this.props.angleName),children:t[this.props.angleName].title}),Object(p.jsxs)("span",{children:[Object(p.jsx)("input",{onChange:this.handleInputActive,type:"checkbox",name:"active",checked:this.state.active})," \u0432\u043a\u043b."]})]}),Object(p.jsx)("button",{onClick:this.handleTypeChange,name:"outside",className:"angle-type__outside ml-a","data-active":"outside"===this.state.type&&"active",children:"\u0412\u043d\u0435\u0448\u043d\u0438\u0439"}),Object(p.jsx)("button",{onClick:this.handleTypeChange,name:"linear",className:"angle-type__linear","data-active":"linear"===this.state.type&&"active",children:"\u041a\u043e\u0441\u043e\u0439"}),Object(p.jsx)("button",{onClick:this.handleTypeChange,name:"inside",className:"angle-type__inside","data-active":"inside"===this.state.type&&"active",children:"\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439"})]}),Object(p.jsxs)("label",{className:"",children:["X ",Object(p.jsx)("input",{onInput:this.handleInputChange,type:"number",name:"y",min:"30",max:Math.round(c,1),"data-break":s,step:"1",value:this.state.y.toString()}),Object(p.jsxs)("span",{children:["max: ",Object(p.jsx)("b",{children:Math.round(c,1)}),"\xa0\u043c\u043c"]})]}),Object(p.jsxs)("label",{className:"switch",children:[Object(p.jsxs)("span",{children:["\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c",Object(p.jsx)("br",{}),"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438"]}),Object(p.jsx)("input",{onChange:this.handleInputChange,name:"send",type:"checkbox",checked:this.state.send})]}),Object(p.jsxs)("label",{className:"",children:["Y ",Object(p.jsx)("input",{onInput:this.handleInputChange,type:"number",name:"x",min:"30",max:Math.round(s,1),step:"1",value:this.state.x.toString(),disabled:this.state.send}),Object(p.jsxs)("span",{children:["max: ",Object(p.jsx)("b",{children:Math.round(s,1)}),"\xa0\u043c\u043c"]})]})]}):Object(p.jsx)("div",{className:"angle-options-wrapper",children:Object(p.jsx)("div",{className:"angle-options-type w100p",children:Object(p.jsxs)("label",{className:"angle-title-wrapper",children:[Object(p.jsx)("span",{className:"angle-title ".concat(this.props.angleName),children:t[this.props.angleName].title}),i]})})})}}]),n}(s.a.Component),Y=new w,z=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={error:null},e.handleSetSize=function(t){t.preventDefault();var n=t.target.name,a=e.props.dkey,s=+t.target.min,c=+t.target.max,i=+t.target.value.toString();e.setState(Object(O.a)({},n,i),(function(){i<s||i>c?(t.target.classList.add("error"),i>c&&(i=c,e.setState({error:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u0431\u044b\u043b\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"}),t.target.classList.remove("error"))):(e.setState({error:null}),t.target.classList.remove("error")),e.props.ff(a,n,i)}))},e.handleSetTitle=function(t){var n=t.target.name,a=t.target.value,s=e.props.dkey;e.props.ff(s,n,a)},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.value,t=window.importOptions,n=this.props.query;return 0===this.props.activeKey?Object(p.jsxs)("div",{id:this.props.dkey,className:"detail not-active","data-key":this.props.dkey,children:[Object(p.jsx)("div",{className:"detail-settings w100p",children:Object(p.jsxs)("div",{className:"flex-nowrap relative",children:[Object(p.jsxs)("fieldset",{id:"detail-size",className:"flex",children:[Object(p.jsx)("legend",{children:"\u0420\u0430\u0437\u043c\u0435\u0440\u044b"}),Object(p.jsx)("label",{className:"w100p",children:Object(p.jsx)("input",{tabIndex:"-1",onChange:this.handleSetTitle,type:"text",name:"title",value:e.title})}),Object(p.jsxs)("label",{className:"flex-column w100p",children:[Object(p.jsx)("span",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),Object(p.jsx)("input",{tabIndex:"-1",onChange:this.handleSetTitle,type:"text",name:"comment",value:e.comment})]}),this.state.error&&Object(p.jsx)("div",{className:"field-error",children:this.state.error}),Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u0414\u043b\u0438\u043d\u0430, \u043c\u043c"}),Object(p.jsx)("input",{autoFocus:!0,tabIndex:n+"1",onChange:this.handleSetSize,type:"number",maxLength:"4",name:"height",min:"60",max:t.SHEET_LENGHT,value:e.nominalheight.toString()}),Object(p.jsxs)("span",{className:"text-muted",children:["max: ",t.SHEET_LENGHT]})]}),Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u0428\u0438\u0440\u0438\u043d\u0430, \u043c\u043c"}),Object(p.jsx)("input",{tabIndex:n+"2",onChange:this.handleSetSize,type:"number",pattern:"[0-9]",maxLength:"4",name:"width",min:"60",max:t.SHEET_WIDTH,value:e.nominalwidth.toString()}),Object(p.jsxs)("span",{className:"text-muted",children:["max: ",t.SHEET_WIDTH]})]}),Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u041a\u043e\u043b-\u0432\u043e, \u0448\u0442"}),Object(p.jsx)("input",{tabIndex:n+"3",onChange:this.handleSetSize,type:"number",maxLength:"4",name:"count",min:"1",max:"1000",value:e.count})]})]}),Object(p.jsxs)("fieldset",{id:"edge",className:"flex",children:[Object(p.jsx)("legend",{children:"\u041a\u0440\u043e\u043c\u043a\u0430"}),Object(p.jsx)(M,{query:this.props.query,func:this.props.edgeF,set:this.props.value})]}),Object(p.jsxs)("div",{className:"detail-ext-options",children:[Object(p.jsx)("button",{tabIndex:"-1","data-action":"change",onClick:this.props.changeDetailOptions,className:"btn",children:"\u0414\u043e\u043f. \u043e\u043f\u0446\u0438\u0438"}),Object(p.jsx)("button",{tabIndex:"-1","data-action":"copy",onClick:this.props.changeDetailOptions,className:"btn",children:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})}),Object(p.jsxs)("div",{className:"detail-plan",children:[Object(p.jsx)(A,{id:this.props.dkey,set:this.props.value,saveSVGfunc:this.props.saveSVGfunc}),Object(p.jsx)("button",{tabIndex:"-1",className:"remove-detail-btn","data-action":"remove",onClick:this.props.changeDetailOptions,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c"})]})]}):Object(p.jsxs)("div",{className:"detail active","data-key":this.props.dkey,children:[Object(p.jsxs)("div",{className:"detail-settings w100p",children:[Object(p.jsxs)("div",{className:"flex-nowrap relative",children:[Object(p.jsxs)("fieldset",{id:"detail-size",className:"flex",children:[Object(p.jsx)("legend",{children:"\u0420\u0430\u0437\u043c\u0435\u0440\u044b"}),Object(p.jsx)("label",{className:"w100p",children:Object(p.jsx)("input",{tabIndex:"-1",onChange:this.handleSetSize,type:"text",name:"title",value:e.title})}),Object(p.jsxs)("label",{className:"flex-column w100p",children:[Object(p.jsx)("span",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),Object(p.jsx)("input",{tabIndex:"-1",onChange:this.handleSetSize,type:"text",name:"comment",value:e.comment})]}),this.state.error&&Object(p.jsx)("div",{className:"field-error",children:this.state.error}),Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u0414\u043b\u0438\u043d\u0430, \u043c\u043c"}),Object(p.jsx)("input",{tabIndex:1+n,onChange:this.handleSetSize,type:"number",name:"height",min:"60",max:t.SHEET_LENGHT,value:e.nominalheight.toString()}),Object(p.jsxs)("span",{className:"text-muted",children:["max: ",t.SHEET_LENGHT]})]}),Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u0428\u0438\u0440\u0438\u043d\u0430, \u043c\u043c"}),Object(p.jsx)("input",{tabIndex:2+n,onInput:this.handleSetSize,type:"number",name:"width",min:"60",max:t.SHEET_WIDTH,value:Y.prepareNumber(e.nominalwidth.toString())}),Object(p.jsxs)("span",{className:"text-muted",children:["max: ",t.SHEET_WIDTH]})]}),Object(p.jsxs)("label",{className:"flex-column",children:[Object(p.jsx)("span",{children:"\u041a\u043e\u043b-\u0432\u043e, \u0448\u0442"}),Object(p.jsx)("input",{tabIndex:3+n,onChange:this.handleSetSize,type:"number",name:"count",min:"1",max:"1000",value:e.count.toString()})]})]}),Object(p.jsxs)("fieldset",{id:"edge",className:"flex",children:[Object(p.jsx)("legend",{children:"\u041a\u0440\u043e\u043c\u043a\u0430"}),Object(p.jsx)(M,{func:this.props.edgeF,set:this.props.value})]}),Object(p.jsxs)("div",{className:"detail-ext-options",children:[Object(p.jsx)("button",{tabIndex:"-1","data-action":"close",onClick:this.props.changeDetailOptions,className:"btn",children:"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"}),Object(p.jsx)("button",{tabIndex:"-1","data-action":"copy",onClick:this.props.changeDetailOptions,className:"btn",children:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(p.jsx)("button",{tabIndex:"-1","data-action":"rotate",onClick:this.props.changeDetailOptions,className:"btn",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0442\u0435\u043a\u0441\u0442\u0443\u0440\u0443"})]})]}),Object(p.jsxs)("fieldset",{id:"angles",className:"w100p",children:[Object(p.jsx)("legend",{children:"\u0423\u0433\u043b\u044b"}),Object(p.jsx)(L,{angleName:"lt",func:this.props.f,set:this.props.value}),Object(p.jsx)(L,{angleName:"rt",func:this.props.f,set:this.props.value}),Object(p.jsx)(L,{angleName:"lb",func:this.props.f,set:this.props.value}),Object(p.jsx)(L,{angleName:"rb",func:this.props.f,set:this.props.value})]}),Object(p.jsxs)("fieldset",{id:"loops",className:e.loops&&"none"!==e.loops.side?"flex w100p":"flex w50p",children:[Object(p.jsx)("legend",{children:"\u041f\u0435\u0442\u043b\u0438"}),Object(p.jsx)(I,{func:this.props.loopF,set:this.props.value})]}),Object(p.jsxs)("fieldset",{id:"groove",className:"flex w50p",children:[Object(p.jsx)("legend",{children:"\u041f\u0430\u0437"}),Object(p.jsx)(F,{func:this.props.grooveF,set:this.props.value})]})]}),Object(p.jsxs)("div",{className:"detail-plan",children:[Object(p.jsx)(A,{id:this.props.dkey,set:this.props.value}),Object(p.jsx)("button",{tabIndex:"-1",className:"remove-detail-btn","data-action":"remove",onClick:this.props.changeDetailOptions,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c"})]})]})}}]),n}(s.a.Component);function P(e){var t=[],n=Object(C.a)({},e),a=n.set,s=n.setSizeF,c=n.loopF,i=n.grooveF,r=n.edgeF,o=n.activeKey,l=n.saveSVG,h=n.changeDetailOptions,d=1;return e.list.forEach((function(e,n){t.push(Object(p.jsx)(z,{activeKey:o===n?1:0,query:d,changeDetailOptions:h,saveSVGfunc:l,ff:s,f:a,loopF:c,grooveF:i,edgeF:r,dkey:n,value:e},n)),d++})),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u0442\u0430\u043b\u0435\u0439"}),t.length>0?t:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442"]})}var X=function(){function e(t){Object(l.a)(this,e),this.detail={title:t.title+" (\u043a\u043e\u043f\u0438\u044f)",width:t.width,nominalwidth:t.width,minWidth:60,maxWidth:window.importOptions.SHEET_WIDTH,height:t.height,nominalheight:t.height,minHeight:60,maxHeight:window.importOptions.SHEET_LENGHT,count:1,reserve:{left:t.reserve.left,top:t.reserve.top,right:t.reserve.right,bot:t.reserve.bot},lt:{title:"\u041b\u0435\u0432\u044b\u0439 \u0432\u0435\u0440\u0445\u043d\u0438\u0439",prev:"lb",next:"rt",x:t.lt.x,y:t.lt.y,nomX:t.lt.nomX,nomY:t.lt.nomY,type:t.lt.type},rt:{title:"\u041f\u0440\u0430\u0432\u044b\u0439 \u0432\u0435\u0440\u0445\u043d\u0438\u0439",prev:"lt",next:"rb",x:t.rt.x,y:t.rt.y,nomX:t.rt.nomX,nomY:t.rt.nomY,type:t.rt.type},rb:{title:"\u041f\u0440\u0430\u0432\u044b\u0439 \u043d\u0438\u0436\u043d\u0438\u0439",prev:"rt",next:"lb",x:t.rb.x,y:t.rb.y,nomX:t.rb.nomX,nomY:t.rb.nomY,type:t.rb.type},lb:{title:"\u041b\u0435\u0432\u044b\u0439 \u043d\u0438\u0436\u043d\u0438\u0439",prev:"rb",next:"lt",x:t.lb.x,y:t.lb.y,nomX:t.lb.nomX,nomY:t.lb.nomY,type:t.lb.type},loops:t.loops,groove:t.groove,grooveIndent:16,grooveWidth:4,grooveDeep:8,edge:t.edge,edgeMin:.4,edgeMax:2,textureRotate:t.textureRotate,svg:null}}return Object(h.a)(e,[{key:"create",value:function(){return this.detail}}]),e}(),W=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={inputOnFocus:null,stage:"setorder",details:new Map,importOptions:window.importOptions,inputType:"number",activeDetail:null,billingOptions:{faster:!1,inbox:!1,poddon:!1}},e.addNewDetailFunc=function(t){var n={title:"\u0414\u0435\u0442\u0430\u043b\u044c #"+(e.state.details.size+1),width:400,nominalwidth:1400,minWidth:60,maxWidth:2040,height:600,nominalheight:1600,minHeight:60,maxHeight:2770,count:1,reserve:{left:!1,top:!1,right:!1,bot:!1},lt:{title:"\u041b\u0435\u0432\u044b\u0439 \u0432\u0435\u0440\u0445\u043d\u0438\u0439",prev:"lb",next:"rt",x:0,y:0,nomX:0,nomY:0,type:"outside"},rt:{title:"\u041f\u0440\u0430\u0432\u044b\u0439 \u0432\u0435\u0440\u0445\u043d\u0438\u0439",prev:"lt",next:"rb",x:0,y:0,nomX:0,nomY:0,type:"outside"},rb:{title:"\u041f\u0440\u0430\u0432\u044b\u0439 \u043d\u0438\u0436\u043d\u0438\u0439",prev:"rt",next:"lb",x:0,y:0,nomX:0,nomY:0,type:"outside"},lb:{title:"\u041b\u0435\u0432\u044b\u0439 \u043d\u0438\u0436\u043d\u0438\u0439",prev:"rb",next:"lt",x:0,y:0,nomX:0,nomY:0,type:"outside"},loops:!1,groove:!1,grooveIndent:16,grooveWidth:4,grooveDeep:8,edge:{left:0,top:0,right:0,bot:0},edgeMin:.4,edgeMax:2,textureRotate:90,svg:null},a=e.state.details,s="D-"+(new Date).getTime();return a.set(s,n),e.setState({details:a}),s},e.fromCheckout=function(t,n){var a=e.state.billingOptions;a[t]=n,e.setState({billingOptions:a})},e.inputOnChange=function(t,n,a){var s=e.state.details,c=s.get(a);for(var i in n)c[t][i]=n[i];s.set(a,c),e.setState({details:s})},e.clearReserve=function(e,t){for(var n in e.reserve)e.reserve[n]===t&&(e.reserve[n]=!1);return"loops"===t&&(e.loops.side=!1),e},e.handleSetDetailSize=function(t,n,a){var s=e.state.details,c=s.get(t);c[n]=a,"width"===n&&a>500?c[n]=500:"width"===n&&a<150?c[n]=150:"height"===n&&a>700?c[n]=700:"height"===n&&a<150&&(c[n]=150),"width"===n&&a<150&&c.loops&&("top"!==c.loops.side&&"bot"!==c.loops.side||(c=e.clearReserve(c,"loops"))),"height"===n&&a<150&&c.loops&&("left"!==c.loops.side&&"right"!==c.loops.side||(c=e.clearReserve(c,"loops"))),c["nominal"+n]=a,s.set(t,c),e.setState({details:s})},e.loopChange=function(t,n){var a=e.state.details,s=a.get(n),c=s.width,i=s.height;if(!s.reserve[t.side]){for(var r in s.reserve)"loops"===s.reserve[r]&&(s.reserve[r]=!1);"none"!==t.side&&(s.reserve[t.side]="loops")}"left"===t.side||"right"===t.side?t.after>i&&(t.after=i-100):t.after>c&&(t.after=c-100),s.loops=t,a.set(n,s),e.setState({details:a})},e.grooveChange=function(t,n){var a=e.state.details,s=a.get(n);s.reserve[t]&&"groove"!==s.reserve[t]||(e.clearReserve(s,"groove"),"none"!==t?(s.reserve[t]="groove",s.groove=t):s.groove=!1),a.set(n,s),e.setState({details:a})},e.edgeChange=function(t,n){var a=e.state.details,s=a.get(n);s.edge=t,a.set(n,s),e.setState({details:a})},e.changeDetailOptions=function(t){var n=t.target,a=n.closest(".detail").dataset.key,s=n.dataset.action,c=e.state.details;if("remove"!==s){if("copy"===s){var i=new X(c.get(a)).create(),r="D-"+(new Date).getTime();return a=r,c.set(r,i),void e.setState({details:c},e.forceUpdate())}if("close"!==s){if("rotate"===s){var o=c.get(a),l=o.width,h=o.height;return o.textureRotate=o.textureRotate>0?0:90,l>=500?o.width=500:l<150?o.width=150:h>=700?o.height=700:h<150&&(o.height=150),c.set(a,o),void e.setState({details:c})}e.setState({activeDetail:a})}else e.setState({activeDetail:null})}else{window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c? \u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.")&&(c.delete(a),e.setState({details:c}))}},e.toCheckoutFunc=function(){e.saveSVG(),e.setState({stage:"checkout"})},e.toOrder=function(){e.setState({stage:"setorder"})},e.saveSVG=function(){var t=document.querySelectorAll("#root svg"),n={};t.forEach((function(e,t,a){var s=e.id;n[s]=a[t].outerHTML})),e.svgs=n},e.afterCreateOrderFunc=function(){e.setState({details:new Map})},e}return Object(h.a)(n,[{key:"render",value:function(){var e="checkout"===this.state.stage,t=!(this.state.details.size>0);return e?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{data:this.state,toOrderFunc:this.toOrder,afterCreateOrderFunc:this.afterCreateOrderFunc,svgs:this.svgs,setOrderDataFunc:this.fromCheckout}),Object(p.jsxs)("div",{className:"copyright",children:["\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u0435 ",Object(p.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://alpha-max.ru",children:"\u0410\u043b\u044c\u0444\u0430\u043c\u0430\u043a\u0441"})]})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(b,{set:this.state,options:this.state.importOptions}),this.state.details.size>2&&Object(p.jsx)(G,{tabIndex:"-1",isDisabled:t,addNewDetailFunc:this.addNewDetailFunc,toCheckoutFunc:this.toCheckoutFunc}),Object(p.jsx)(P,{activeKey:this.state.activeDetail,changeDetailOptions:this.changeDetailOptions,saveSVG:this.saveSVG,list:this.state.details,loopF:this.loopChange,grooveF:this.grooveChange,edgeF:this.edgeChange,set:this.inputOnChange,setSizeF:this.handleSetDetailSize}),Object(p.jsx)(G,{tabIndex:"999",isDisabled:t,addNewDetailFunc:this.addNewDetailFunc,toCheckoutFunc:this.toCheckoutFunc}),Object(p.jsxs)("div",{className:"copyright",children:["\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432\u0435 ",Object(p.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://alpha-max.ru",children:"\u0410\u043b\u044c\u0444\u0430\u043c\u0430\u043a\u0441"})]})]})}}]),n}(s.a.Component);function G(e){return Object(p.jsxs)("div",{id:"calc-form-controlls-wrapper",children:[Object(p.jsxs)("button",{tabIndex:e.tabIndex,className:"btn",onClick:e.addNewDetailFunc,children:[Object(p.jsx)("b",{children:"+"})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c"]}),Object(p.jsx)("button",{className:"btn",disabled:e.isDisabled,onClick:e.toCheckoutFunc,children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044e"})]})}var V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))};i.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(W,{})}),document.getElementById("root")),V()},7:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.7eb44384.chunk.js.map